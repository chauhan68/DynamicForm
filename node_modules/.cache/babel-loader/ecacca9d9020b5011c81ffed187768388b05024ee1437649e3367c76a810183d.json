{"ast":null,"code":"var _jsxFileName = \"/home/pritam/ContentStack/dynamic-form/src/Components/Form/Form.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { useForm } from \"react-hook-form\";\nimport { VariableSizeList as List } from \"react-window\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport EmptyForm from '../EmptyForm/EmptyForm';\nimport FormFields from '../FormFields/FormFields';\nimport './form.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Form = props => {\n  _s();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const [formData, updateFormData] = useState(props.form);\n  const onSubmit = data => {\n    console.log('Data entered is', data);\n  };\n  const updateOrder = (startIndex, endIndex) => {\n    const clonedData = [...formData];\n    const [removed] = clonedData.splice(startIndex, 1);\n    clonedData.splice(endIndex, 0, removed);\n    return clonedData;\n  };\n  const onDragEnd = result => {\n    if (!result.destination) {\n      return;\n    }\n    const newOrderedFormData = updateOrder(result.source.index, result.destination.index);\n    updateFormData(newOrderedFormData);\n  };\n  const renderForm = (currentElement, index) => {\n    const {\n      uid\n    } = currentElement;\n    return /*#__PURE__*/_jsxDEV(Draggable, {\n      draggableId: uid,\n      index: index,\n      isDragDisabled: formData.length === 1,\n      children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field-container\",\n        children: [formData.length > 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"reorder-icon\",\n          ref: provided.innerRef,\n          ...provided.draggableProps,\n          ...provided.dragHandleProps,\n          children: \"\\u2630\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(FormFields, {\n          currentElement: currentElement,\n          register: register,\n          errors: errors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this)]\n      }, uid, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this)\n    }, uid, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this);\n  };\n  const renderComponents = () => {\n    if (!Array.isArray(formData) || formData.length === 0) {\n      return /*#__PURE__*/_jsxDEV(EmptyForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 20\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(DragDropContext, {\n        onDragEnd: onDragEnd,\n        children: /*#__PURE__*/_jsxDEV(Droppable, {\n          droppableId: \"droppable\",\n          mode: \"virtual\",\n          renderClone: (provided, snapshot, rubric) => /*#__PURE__*/_jsxDEV(QuoteItem, {\n            provided: provided,\n            isDragging: snapshot.isDragging,\n            quote: quotes[rubric.source.index],\n            index: rubric.source.index\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this),\n          children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: provided.innerRef,\n            ...provided.droppableProps,\n            children: /*#__PURE__*/_jsxDEV(AutoSizer, {\n              children: _ref => {\n                let {\n                  height,\n                  width\n                } = _ref;\n                return /*#__PURE__*/_jsxDEV(List, {\n                  height: height,\n                  itemCount: formData.length,\n                  itemSize: 20,\n                  width: width,\n                  outerRef: droppableProvided.innerRef,\n                  itemData: formData,\n                  children: formData.map(renderForm)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 41\n                }, this);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-wrapper\",\n    children: renderComponents()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n};\n_s(Form, \"uAeZh3Kep3p0wiF5Pz0UnKnPtVA=\", false, function () {\n  return [useForm];\n});\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["React","useState","DragDropContext","Droppable","Draggable","useForm","VariableSizeList","List","AutoSizer","EmptyForm","FormFields","Form","props","register","handleSubmit","formState","errors","formData","updateFormData","form","onSubmit","data","console","log","updateOrder","startIndex","endIndex","clonedData","removed","splice","onDragEnd","result","destination","newOrderedFormData","source","index","renderForm","currentElement","uid","length","provided","innerRef","draggableProps","dragHandleProps","renderComponents","Array","isArray","snapshot","rubric","isDragging","quotes","droppableProps","height","width","droppableProvided","map"],"sources":["/home/pritam/ContentStack/dynamic-form/src/Components/Form/Form.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { useForm } from \"react-hook-form\";\nimport { VariableSizeList as List } from \"react-window\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\n\nimport EmptyForm from '../EmptyForm/EmptyForm';\nimport FormFields from '../FormFields/FormFields';\n\nimport './form.css';\n\nconst Form = (props) => {\n\n    const { register, handleSubmit, formState: { errors } } = useForm();\n    const [formData, updateFormData] = useState(props.form);\n\n    const onSubmit = (data) => {\n        console.log('Data entered is', data);\n    }\n\n    const updateOrder = (startIndex, endIndex) => {\n        const clonedData = [...formData];\n        const [removed] = clonedData.splice(startIndex, 1);\n        clonedData.splice(endIndex, 0, removed);\n\n        return clonedData;\n    };\n\n    const onDragEnd = (result) => {\n        if (!result.destination) {\n            return;\n        }\n\n        const newOrderedFormData = updateOrder(\n            result.source.index,\n            result.destination.index\n        );\n\n        updateFormData(newOrderedFormData);\n    };\n\n    const renderForm = (currentElement, index) => {\n        const { uid } = currentElement;\n\n        return (\n            <Draggable key={uid} draggableId={uid} index={index} isDragDisabled={formData.length === 1}>\n                {(provided) => (\n                    <div key={uid} className=\"field-container\">\n                        {formData.length > 1 && (\n                            <span\n                                className=\"reorder-icon\"\n                                ref={provided.innerRef}\n                                {...provided.draggableProps}\n                                {...provided.dragHandleProps}\n                            >\n                                &#9776;\n                            </span>\n                        )}\n                        <FormFields currentElement={currentElement} register={register} errors={errors} />\n                    </div>\n                )}\n            </Draggable>\n        )\n    }\n\n    const renderComponents = () => {\n        if (!Array.isArray(formData) || formData.length === 0) {\n            return <EmptyForm />;\n        }\n        return (\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <DragDropContext onDragEnd={onDragEnd}>\n                    <Droppable\n                        droppableId=\"droppable\"\n                        mode=\"virtual\"\n                        renderClone={(\n                            provided,\n                            snapshot,\n                            rubric\n                          ) => (\n                            <QuoteItem\n                              provided={provided}\n                              isDragging={snapshot.isDragging}\n                              quote={quotes[rubric.source.index]}\n                              index={rubric.source.index}\n                            />\n                          )}\n                    >\n                        {(provided) => (\n                            <div\n                                ref={provided.innerRef}\n                                {...provided.droppableProps}\n                            >\n                                <AutoSizer>\n                                    {({ height, width }) => (\n                                        <List\n                                            height={height}\n                                            itemCount={formData.length}\n                                            itemSize={20}\n                                            width={width}\n                                            outerRef={droppableProvided.innerRef}\n                                            itemData={formData}\n                                        >\n                                            {formData.map(renderForm)}\n                                        </List>\n                                    )}\n                                </AutoSizer>\n                            </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n                <button type='submit'>Submit</button>\n            </form>\n        );\n    };\n\n    return (\n        <div className=\"main-wrapper\">\n            {renderComponents()}\n        </div>\n    );\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}